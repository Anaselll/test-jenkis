<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="dashboard.css">
    <title>Business Management Dashboard</title>
</head>
<body>

<h1>ðŸ“Š Business Management Dashboard</h1>

<div class="cards">
    <div class="card">
        <h3>Total Employees</h3>
        <p>{{ summary.total_employees }}</p>
    </div>
    <div class="card">
        <h3>Total Sales</h3>
        <p>{{ summary.total_sales }}</p>
    </div>
    <div class="card">
        <h3>Total Revenue</h3>
        <p>${{ "%.2f"|format(summary.total_revenue) }}</p>
    </div>
    <div class="card">
        <h3>Average Sale</h3>
        <p>${{ "%.2f"|format(summary.average_sale) }}</p>
    </div>
</div>

<h2>âž• Add Employee</h2>
<form method="post" action="/api/employees" onsubmit="return submitForm(event, this)">
    <input name="name" placeholder="Name" required>
    <input name="position" placeholder="Position" required>
    <input name="salary" placeholder="Salary" type="number" required>
    <button>Add</button>
</form>

<h2>ðŸ‘¥ Employees</h2>
<table>
    <tr>
        <th>Name</th>
        <th>Position</th>
        <th>Salary</th>
        <th>Hired</th>
    </tr>
    {% for e in employees %}
    <tr>
        <td>{{ e.name }}</td>
        <td>{{ e.position }}</td>
        <td>${{ e.salary }}</td>
        <td>{{ e.hired_date }}</td>
    </tr>
    {% endfor %}
</table>

<h2>âž• Add Sale</h2>
<form method="post" action="/api/sales" onsubmit="return submitForm(event, this)">
    <input name="product" placeholder="Product" required>
    <input name="amount" placeholder="Amount" type="number" step="0.01" required>
    <input name="customer" placeholder="Customer" required>
    <button>Add</button>
</form>

<h2>ðŸ’° Sales</h2>
<table>
    <tr>
        <th>Product</th>
        <th>Amount</th>
        <th>Customer</th>
        <th>Date</th>
    </tr>
    {% for s in sales %}
    <tr>
        <td>{{ s.product }}</td>
        <td>${{ s.amount }}</td>
        <td>{{ s.customer }}</td>
        <td>{{ s.sale_date }}</td>
    </tr>
    {% endfor %}
</table>

<script>
function submitForm(event, form) {
    event.preventDefault();

    const data = Object.fromEntries(new FormData(form));

    fetch(form.action, {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify(data)
    }).then(() => window.location.reload());

    return false;
}
</script>

</body>
</html>